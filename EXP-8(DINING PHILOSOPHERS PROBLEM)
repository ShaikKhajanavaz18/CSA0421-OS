#include <stdio.h>
#include <pthread.h>
#include <semaphore.h>

sem_t chop[5];

void* phil(void* n) {
    int i = *(int*)n;
    sem_wait(&chop[i]);
    sem_wait(&chop[(i+1)%5]);
    printf("Philosopher %d is eating\n", i);
    sem_post(&chop[i]);
    sem_post(&chop[(i+1)%5]);
    printf("Philosopher %d is thinking\n", i);
}

int main() {
    pthread_t p[5];
    int i, id[5];

    for(i=0;i<5;i++) sem_init(&chop[i],0,1);
    for(i=0;i<5;i++){
        id[i]=i;
        pthread_create(&p[i],NULL,phil,&id[i]);
    }
    for(i=0;i<5;i++) pthread_join(p[i],NULL);
    return 0;
}
OUTPUT:
Philosopher 0 is eating
Philosopher 0 is thinking
Philosopher 2 is eating
Philosopher 2 is thinking
Philosopher 4 is eating
Philosopher 4 is thinking
...
